<!DOCTYPE html>  <html lang="en">  <head>  <meta  charset="UTF-8"> <title>oc-selfie</title>  <style>
html, body { margin:0; padding:0; } body { display:flex; align-items:center; justify-content:center;
height:100vh;  background-color:white; }  canvas  { width:auto  !important;  height:90vh !important;
background-color:white; image-rendering:pixelated; } </style> </head> <body>  <script type="module">
let                                               rom                                              =
'AAAAAAAAAAAAAAAAAAAAABA4fP58OBAAAAAAAAAAAACSRJJEkkSSAAAAAAAAAAAAiIj4iIg+CAgIAAAAAAAAAPCA4ICeEBwQE'+
'AAAAAAAAAB4gIB4PCI8IiIAAAAAAAAAgICA+D4gPCAgAAAAAAAAADhERDgAAAAAAAAAAAAAAAAAEBD+EBD+AAAAAAAAAAAAiM'+
'iomIggICA+AAAAAAAAAIiIUCA+CAgICAAAAAAAAAAQEBDwAAAAAAAAAAAAAAAQAAAA8BAQEBAQAAAAAAAAAAAAAB8QEBAQEAA'+
'AAAAAAAAQEBAfAAAAAAAAAAAAAAAQEBAQ/xAQEBAQAAAAAAAAEAAAAAAAAAAAAAAAAAAAAP8A/wAAAAAAAAAAAAAAAAAAAAAA'+
'/wAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAEBAQHxAQEBAQAAAAAAAAEBAQEPAQEBAQEAAAA'+
'AAAABAQEBD/AAAAAAAAAAAAAAAQAAAA/xAQEBAQAAAAAAAAABAQEBAQEBAQEAAAAAAAABACCCCAIAgC/gAAAAAAAAAAgCAIAg'+
'gggP4AAAAAAAAAAAAA/iQkJEQAAAAAAAAAAAACBP4Q/kCAAAAAAAAAAAAAHCIg+CB4pkAAAAAAAAAAAAAAABAAAAAAAAAAAAA'+
'AAAAAAAAAAAAAAAAAAAAAAAAAEBAQEBAAEAAAAAAAAAAAACQkJAAAAAAAAAAAAAAAAABISPxI/EhIAAAAAAAAAAAAEHyQfBJ8'+
'EAAAAAAAAAAAAMLECBAgRoYAAAAAAAAAAABwiIhwioR6AAAAAAAAAAAAGBAgAAAAAAAAAAAAAAAAAAgQICAgEAgAAAAAAAAAA'+
'AAgEAgICBAgAAAAAAAAAAAAAEQo/ihEAAAAAAAAAAAAAAAQEP4QEAAAAAAAAAAAAAAAAAAAADAgQAAAAAAAAAAAAAAA/gAAAA'+
'AAAAAAAAAAAAAAAAAAMDAAAAAAAAAAAAACBAgQIECAAAAAAAAAAAAAOESCgoJEOAAAAAAAAAAAABAwUBAQEHwAAAAAAAAAAAB'+
'4hAIcYID+AAAAAAAAAAAA/gQIHAKCfAAAAAAAAAAAAAgYKEj+CAgAAAAAAAAAAAD+gLzCAoJ8AAAAAAAAAAAAPEKAvMJCPAAA'+
'AAAAAAAAAP4CBAgQIEAAAAAAAAAAAAB8goJ8goJ8AAAAAAAAAAAAeISGegKEeAAAAAAAAAAAAAAwMAAAMDAAAAAAAAAAAAAAM'+
'DAAADAgQAAAAAAAAAAAAggggCAIAgAAAAAAAAAAAAAA/gD+AAAAAAAAAAAAAACAIAgCCCCAAAAAAAAAAAAAfIIMEBAAEAAAAA'+
'AAAAAAAHyCipKcgHwAAAAAAAAAAAAQKESC/oKCAAAAAAAAAAAA/EJCfEJC/AAAAAAAAAAAADxCgICAQjwAAAAAAAAAAAD4REJ'+
'CQkT4AAAAAAAAAAAA/o'+ /*                                                  */ 'CA+ICA/gAAAAAAAAAAA'+
'P6AgPiAgIAAAAAAAAAA'+ /*                 Code-Selfie-Code                 */ 'AAA8QoCAjkI8AAAAAAA'+
'AAAAAgoKC/oKCggAAAA'+ /*                                                  */ 'AAAAAAAHwQEBAQEHwAA'+
'AAAAAAAAAAOBAQEBIR4'+ /*    This work consists of one page of printed     */ 'AAAAAAAAAAAAgoywwLC'+
'MggAAAAAAAAAAAICAgI'+ /* JavaScript/HTML source text, which is executable */ 'CAgP4AAAAAAAAAAACCx'+
'qqSgoKCAAAAAAAAAAAA'+ /*   in any modern browser. When run, the program   */ 'gsKikoqGggAAAAAAAAA'+
'AAHyCgoKCgnwAAAAAAA'+ /*  generates and displays a rendering of its own   */ 'AAAAD8goL8gICAAAAAA'+
'AAAAAAAfIKCgoqEegAA'+ /*  source code, a self-portrait, in the form of a  */ 'AAAAAAAAAPyCgvyIhII'+
'AAAAAAAAAAAB8goB8Ao'+ /* downloadable PNG image. This very image has been */ 'J8AAAAAAAAAAAA/hAQE'+
'BAQEAAAAAAAAAAAAIKC'+ /* reproduced here. The program lays bare its inner */ 'goKCgnwAAAAAAAAAAAC'+
'CgkREKCgQAAAAAAAAAA'+ /*  workings, by producing its own human-readable   */ 'AAgoKCkpKqRAAAAAAAA'+
'AAAAIJEKBAoRIIAAAAA'+ /*                 representation.                  */ 'AAAAAACCRCgQEBAQAAA'+
'AAAAAAAAA/gQIECBA/g'+ /*  Through its self-referential nature, the work   */ 'AAAAAAAAAAADwgICAgI'+
'DwAAAAAAAAAAACAQCAQ'+ /*shows some of the fundamental properties of code, */ 'CAQCAAAAAAAAAAAAeAg'+
'ICAgIeAAAAAAAAAAAAB'+ /*   programmable machines and their relation to    */ 'AoRIIAAAAAAAAAAAAAA'+
'AAAAAAAAAD+AAAAAAAA'+ /*              language and symbols.               */ 'AAAAMBAIAAAAAAAAAAA'+
'AAAAAAAAAfAJ+gn4AAA'+ /*In order to communicate with machines, we need to */ 'AAAAAAAACAgLzCgsK8A'+
'AAAAAAAAAAAAAA8QoBA'+ /* use specially designed (programming) languages.  */ 'PgAAAAAAAAAAAAICeoa'+
'ChnoAAAAAAAAAAAAAAH'+ /*Like any language, these use a set of symbols (an */ 'yC/oB8AAAAAAAAAAAAH'+
'CIg+CAgIAAAAAAAAAAA'+ /* alphabet) which can be realized (“rendered”) in  */ 'AAACeoSEfASEeAAAAAA'+
'AAACAgLzCgoKCAAAAAA'+ /*               many different ways.               */ 'AAAAAAEAAwEBAQfAAAA'+
'AAAAAAAAAQABAQEBISE'+ /*  One of the first widespread ways of rendering   */ 'eAAAAAAAAACAgIiQ4Ii'+
'CAAAAAAAAAAAAMBAQEB'+ /* latin characters for use by humans and computers */ 'AQOAAAAAAAAAAAAAAAx'+
'KqSkoIAAAAAAAAAAAAA'+ /*alike was employed in the popular VT 100 Computer */ 'ALzCgoKCAAAAAAAAAAA'+
'AAAB8goKCfAAAAAAAAA'+ /*   Terminal from 1978. In this work, we use the   */ 'AAAAAAvMLCvICAgAAAA'+
'AAAAAAAAHqGhnoCAgIA'+ /*original VT 100 character generator algorithm and */ 'AAAAAAAAAACcYkBAQAA'+
'AAAAAAAAAAAAAfIB8Av'+ /*data, which has since become open source software.*/ 'wAAAAAAAAAAAAgIPggI'+
'CQYAAAAAAAAAAAAAACE'+ /*                                                  */ 'hISEegAAAAAAAAAAAAA'+
'AgoJEKBAAAAAAAAAAAA'+ /*                                                  */ 'AAAIKCkqpEAAAAAAAAA'+
'AAAAACESDBIhAAAAAAAAAAAAAAAhISMdASEeAAAAAAAAAAAAP4EGCD+AAAAAAAAAAAADhAQYBAQDgAAAAAAAAAAABAQEAAAEB'+
'AQAAAAAAAAAADgEBAMEBDgAAAAAAAAAAAAYpKMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=' ;  let  src, bytes,
ctx;  function decode(str)  {  str =  atob(str);  let  d  =  [];  for  (let  char of str) {  d.push(
char.charCodeAt(0) ); } return( d ); } function getCharDataBytes(charCode) { let offset = charCode *
16;  return(  [bytes[offset+15]].concat(  bytes.slice(  offset,  offset  +  9  )  )  );  }  function
bytesToBinary(bytes)  { return bytes.reduce( (acc, octet)=> { for (let i=7;  i>=0;  i--) { acc.push(
(octet >> i)  & 1 ); }  return( acc );  }, []); }  function  getRawCharData(charCode) { let  bytes =
getCharDataBytes(charCode); return(  bytesToBinary(  bytes  )  );  } function  getCharData(charCode,
dot_replication=false, dot_stretching=false) { let raw = getRawCharData(charCode); let out = []; let
pbit = 0;  for  (let  j=0; j<10;  j++)  { for  (let  i=0;  i<8;  i++)  { let  bit =  raw[j*8+i];  if
(dot_stretching && pbit) { out.push(1); } else { out.push(bit); } pbit =  bit; } if (dot_replication
&&  pbit) { out.push(1, 1); }  else { out.push(0, 0);  } pbit =  0; }  return(  out  );  }  function
drawChar(charCode,     x,    y,    height=10,     aspect=1,    spacing=0,     dot_replication=false,
dot_stretching=false) {  let ch =  getCharData(charCode, dot_replication,  dot_stretching); for (let
j=0;  j<10;  j++) {  for  (let i=0;  i<10; i++) {  if  ( ch[j*10+i]  )  {  ctx.fillStyle =  'white';
ctx.fillRect( x + i*height/10*aspect * (1+spacing), y + j*height/10 * (1+spacing), height/10*aspect,
height/10);   }   }   }  }  function   drawText(text,   ox,  oy,  height=10,  aspect=1,   spacing=0,
dot_replication=false, dot_stretching=false) { let x = 0; let y  = 0;  for  (let i=0; i<text.length;
i++)  { let ch = text.charCodeAt(i); if ( ch ===  10 )  { x=0; y++; continue;  } drawChar(  ch, ox +
x*height*aspect  *   (1+spacing),  oy   +   y*height  *   (1+spacing),  height,   aspect,   spacing,
dot_replication, dot_stretching); x++; } } function topx(mm, ppi=600) { return( mm / 25.4 * ppi ); }
(async  function main() { bytes = decode(rom);  src  = await fetch('./index.rect.html').then(res  =>
res.text());  let  canvas  =  document.querySelector('canvas');  canvas.width   =  topx(230  +  10);
canvas.height  =  topx(330  +  10);  ctx  =  canvas.getContext('2d');  ctx.fillStyle  = 'royalblue';
ctx.fillRect(0,  0,  canvas.width, canvas.height);  drawText(src, topx(15),  topx(15), 100,  0.5, 0,
false,        true);       })();       </script>       <canvas></canvas>       </body>       </html>